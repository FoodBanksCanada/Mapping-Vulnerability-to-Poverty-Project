<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8' />
    <title>Mapping Vulnerability to Poverty - Key indicators</title>

    <link rel="icon" href="images/FBC_icon.png">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- gooogle  jquery CDN-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <!-- connect to mapbox scripts and styles -->
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.2.1/mapbox-gl.js'></script>

    <!-- mapbox geocoder -->
    <script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.4.2/mapbox-gl-geocoder.min.js'></script>
    <link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.4.2/mapbox-gl-geocoder.css' type='text/css' />

    <!-- D3 .js library for bar graphs -->
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.2.1/mapbox-gl.css' rel='stylesheet' />

    <!-- google fonts Roboto -->
    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">

    <!-- project stylesheet -->
    <link rel="stylesheet" href="css/stylesheet.css" />
</head>

<body>
        <div id="nav_bar" class="banner">
            <div class="nav_content">
                <h1> Mapping Vulnerability to Poverty</h1>
            </div>
            <div class="nav_content logo_outer_container">
                <div class="logo_container">
                    <a target="_blank" class="logo_link" href="https://www.foodbankscanada.ca">
                        <img src="images/FBC_logo_white.png" alt="FBC Logo" class="logo">
                    </a>
                </div>
            </div>
        </div>

        <div class="outer_container">
            <div id="side_panel_outer">
                <div id="side_panel">
                    <div id="intro_window">
                        <div id="intro_window_inner">
                            <h2 class="intro_content">Where in Canada are people more vulnerable to poverty and food insecurity?</h2>
                            <p class="intro_content">Select data and geography levels from the drop down menus & click on an area to find out more about the key indicators</p>
                        </div>
                        <div id="about_window">
                            <div class="about_inner_contain">
                                <p id="clicked_about_type" class="intro_about_content about_titles"></p>
                                <p id="clicked_about_name" class="intro_about_content about_values"></p>
                            </div>
                            <div class="about_inner_contain">
                                <p id="clicked_about_census_type" class="intro_about_content about_titles hidden">Located within Census Division:</p>
                                <p id="clicked_about_census_name" class="intro_about_content about_values hidden"></p>
                            </div>
                        </div>
                    </div>

                    <!-- info_window contains all to be populated -->
                    <div id="info_window">
                            <div class="info_rows" id="geography_row">
                                <div class="tooltip_containers">
                                    <svg id="about_tooltip_geography" class="tooltips about_tooltips"></svg>
                                    <span class="tooltiptext">The map is divided by Federal Electoral Districts (FED), also referred to as ridings, and census Aggregate Dissemination Areas (ADA).<br>Both cover the entire country and respect provincial and territorial boundaries. ADAs have a population between 5,000 and 15,000 where possible. FEDs are areas represented by members of the House of Commons and are based on the 2013 Representation Order.</span>
                                </div>
                                <div class="info_labels_containers row_content">
                                    <p class="clicked_labels">Geography:</p>
                                </div>
                                <div class="info_values_containers geography_values_containers row_content">
                                    <p class="info_values geography_values" id="info_value_geography">Selected</p>
                                </div>
                            
                                <div class="provter_info_values_containers geography_values_containers row_content">
                                    <p class="info_values geography_values" id="provter_value_geography">Province or Territory</p>
                                </div>
                            </div>
                            <!------------------------------------------------------------------------>

                            <!------------------------------------------------------------------------>
                            <div class="info_rows" id="population_row">
                                <div class="tooltip_containers">
                                    <svg id="about_tooltip_population" class="tooltips about_tooltips"></svg>
                                    <span class="tooltiptext">2016 census population</span>
                                </div>
                                <div class="info_labels_containers row_content">
                                    <p class="clicked_labels">Population:</p>
                                </div>
                                <div class="info_values_containers row_content">
                                    <p class="info_values geography_values_num" id="info_value_population"></p>
                                </div>
                            
                                <div class="provter_info_values_containers row_content">
                                    <p class="info_values geography_values_num" id="provter_value_population"></p>
                                </div>
                            </div>
                            <!------------------------------------------------------------------------>
                            
                            <!------------------------------------------------------------------------>
                            <div class="info_rows" id="med_inc_row">
                                <div class="tooltip_containers">
                                    <svg id="about_tooltip_med_inc" class="tooltips about_tooltips"></svg>
                                    <span class="tooltiptext">Median total income of households in 2015 ($)</span>
                                </div>
                                <div class="info_labels_containers row_content">
                                    <p class="clicked_labels">Median household income:</p>
                                </div>
                                <div class="info_values_containers row_content">
                                    <p class="info_values geography_values_num" id="info_value_med_inc">$</p>
                                </div>
                            
                                <div class="provter_info_values_containers row_content">
                                    <p class="info_values geography_values_num" id="provter_value_med_inc">$</p>
                                </div>
                            </div>
                            <!------------------------------------------------------------------------>

                            <!------------------------------------------------------------------------>
                            <div class="info_rows" id="lim_at_row">
                                <div class="tooltip_containers row_content">
                                    <svg id="clicked_tooltip_lim_at" class="tooltips clicked_tooltips"></svg>
                                    <span class="tooltiptext">Prevalence of units whose income falls below a specified low-income line, after
                                        tax (LIM-AT). The specified low income line refers to households whose income falls below fifty per cent
                                        (50%) of the median-adjusted after-tax income of private households where low income concepts are
                                        applicable</span>
                                </div>
                            
                                <div class="clicked_labels_containers row_content">
                                    <p class="clicked_labels">Low-Income Measure:</p>
                                </div>
                            
                                <div class="clicked_values_containers row_content">
                                    <p class="clicked_values" id="clicked_value_lim_at"> 00.0% </p>
                                </div>
                            
                                <div class="clicked_bar_containers row_content">
                                    <svg id="clicked_bar_lim_at" class="bars clicked_bars"></svg>
                                </div>
                            
                                <div class="provter_values_containers row_content">
                                    <p class="provter_values" id="provter_value_lim_at"> 00.0% </p>
                                </div>
                            
                                <div class="provter_bar_containers row_content">
                                    <svg id="provter_bar_lim_at" class="bars provter_bars"></svg>
                                </div>
                            </div>
                            <!------------------------------------------------------------------------>

                            <!------------------------------------------------------------------------>
                            <div class="info_rows" id="child_poverty_row">
                                <div class="tooltip_containers row_content">
                                    <svg id="clicked_tooltip_child_poverty" class="tooltips clicked_tooltips"></svg>
                                    <span class="tooltiptext">Low income rates for children 17 and under are based on the most current available
                                        data from the 2017 T1 Family File (T1FF)
                                        calculated according to the Low-Income Measure After Tax (LIM-AT). The T1FF calculates low income based on
                                        the tax
                                        filings of Canadians, 96% of whom file.</span>
                                </div>
                            
                                <div class="clicked_labels_containers row_content">
                                    <p class="clicked_labels">Child Poverty Rate:</p>
                                </div>
                            
                                <div class="clicked_values_containers row_content">
                                    <p class="clicked_values" id="clicked_value_child_poverty"> 00.0% </p>
                                </div>
                            
                                <div class="clicked_bar_containers row_content">
                                    <svg id="clicked_bar_child_poverty" class="bars clicked_bars"></svg>
                                </div>
                            
                                <div class="provter_values_containers row_content">
                                    <p class="provter_values" id="provter_value_child_poverty"> 00.0% </p>
                                </div>
                            
                                <div class="provter_bar_containers row_content">
                                    <svg id="provter_bar_child_poverty" class="bars provter_bars"></svg>
                                </div>
                            </div>
                            <!------------------------------------------------------------------------>

                            <!------------------------------------------------------------------------>
                            <div class="info_rows" id="tenant30_row">
                                <div class="tooltip_containers row_content">
                                    <svg id="clicked_tooltip_tenant30" class="tooltips clicked_tooltips"></svg>
                                    <span class="tooltiptext">Prevalence of tenant households spending 30% or more of their income on shelter
                                        costs. Housing is considered affordable when a household spends less than 30 per cent of its pre tax
                                        income on shelter</span>
                                </div>
                            
                                <div class="clicked_labels_containers row_content">
                                    <p class="clicked_labels">Housing Affordability:</p>
                                </div>
                            
                                <div class="clicked_values_containers row_content">
                                    <p class="clicked_values" id="clicked_value_tenant30"> 00.0% </p>
                                </div>
                            
                                <div class="clicked_bar_containers row_content">
                                    <svg id="clicked_bar_tenant30" class="bars clicked_bars"></svg>
                                </div>
                            
                                <div class="provter_values_containers row_content">
                                    <p class="provter_values" id="provter_value_tenant30"> 00.0% </p>
                                </div>
                            
                                <div class="provter_bar_containers row_content">
                                    <svg id="provter_bar_tenant30" class="bars provter_bars"></svg>
                                </div>
                            </div>
                            <!------------------------------------------------------------------------>

                            <!------------------------------------------------------------------------>
                            <div class="info_rows" id="unemployment_row">
                                <div class="tooltip_containers row_content">
                                    <svg id="clicked_tooltip_unemployment" class="tooltips clicked_tooltips"></svg>
                                    <span class="tooltiptext">Number of unemployed persons expressed as a percentage of the labour force.</span>
                                </div>
                            
                                <div class="clicked_labels_containers row_content">
                                    <p class="clicked_labels">Unemployment Rate:</p>
                                </div>
                            
                                <div class="clicked_values_containers row_content">
                                    <p class="clicked_values" id="clicked_value_unemployment"> 00.0% </p>
                                </div>
                            
                                <div class="clicked_bar_containers row_content">
                                    <svg id="clicked_bar_unemployment" class="bars clicked_bars"></svg>
                                </div>
                            
                                <div class="provter_values_containers row_content">
                                    <p class="provter_values" id="provter_value_unemployment"> 00.0% </p>
                                </div>
                            
                                <div class="provter_bar_containers row_content">
                                    <svg id="provter_bar_unemployment" class="bars provter_bars"></svg>
                                </div>
                            </div>
                            <!------------------------------------------------------------------------>

                            <!------------------------------------------------------------------------>
                            <div class="info_rows" id="aboriginal_identity_row">
                                <div class="tooltip_containers row_content">
                                    <svg id="clicked_tooltip_aboriginal_identity" class="tooltips clicked_tooltips"></svg>
                                    <span class="tooltiptext">'Indigenous identity' includes persons who are First Nations, Métis or Inuk and/or
                                        those who are Registered or Treaty Indians and/or those who have membership in a First Nation or Indian
                                        band</span>
                                </div>
                            
                                <div class="clicked_labels_containers row_content">
                                    <p class="clicked_labels">Indigenous Identity:</p>
                                </div>
                            
                                <div class="clicked_values_containers row_content">
                                    <p class="clicked_values" id="clicked_value_aboriginal_identity"> 00.0% </p>
                                </div>
                            
                                <div class="clicked_bar_containers row_content">
                                    <svg id="clicked_bar_aboriginal_identity" class="bars clicked_bars"></svg>
                                </div>
                            
                                <div class="provter_values_containers row_content">
                                    <p class="provter_values" id="provter_value_aboriginal_identity"> 00.0% </p>
                                </div>
                            
                                <div class="provter_bar_containers row_content">
                                    <svg id="provter_bar_aboriginal_identity" class="bars provter_bars"></svg>
                                </div>
                            </div>
                            <!------------------------------------------------------------------------>

                            <!------------------------------------------------------------------------>
                            <div class="info_rows" id="visible_minority_row">
                                <div class="tooltip_containers row_content">
                                    <svg id="clicked_tooltip_visible_minority" class="tooltips clicked_tooltips"></svg>
                                    <span class="tooltiptext">Visible minority refers to whether a person belongs to a visible minority group as
                                        defined by the Employment Equity Act. The visible minority population consists mainly of the following
                                        groups: South Asian, Chinese, Black, Filipino, Latin American, Arab, Southeast Asian, West Asian, Korean
                                        and Japanese. It does not include Indigenous identity.</span>
                                </div>
                            
                                <div class="clicked_labels_containers row_content">
                                    <p class="clicked_labels">Visible Minority:</p>
                                </div>
                            
                                <div class="clicked_values_containers row_content">
                                    <p class="clicked_values" id="clicked_value_visible_minority"> 00.0% </p>
                                </div>
                            
                                <div class="clicked_bar_containers row_content">
                                    <svg id="clicked_bar_visible_minority" class="bars clicked_bars"></svg>
                                </div>
                            
                                <div class="provter_values_containers row_content">
                                    <p class="provter_values" id="provter_value_visible_minority"> 00.0% </p>
                                </div>
                            
                                <div class="provter_bar_containers row_content">
                                    <svg id="provter_bar_visible_minority" class="bars provter_bars"></svg>
                                </div>
                            </div>
                            <!------------------------------------------------------------------------>

                            <!------------------------------------------------------------------------>
                            <div class="info_rows" id="recent_immigration_row">
                                <div class="tooltip_containers row_content">
                                    <svg id="clicked_tooltip_recent_immigration" class="tooltips clicked_tooltips"></svg>
                                    <span class="tooltiptext">(2011 - 2016) 'Immigrants' includes persons who are landed immigrants or permanent
                                        residents</span>
                                </div>
                                <div class="clicked_labels_containers row_content">
                                    <p class="clicked_labels">Recent Immigration:</p>
                                </div>
                                <div class="clicked_values_containers row_content">
                                    <p class="clicked_values" id="clicked_value_recent_immigration"> 00.0% </p>
                                </div>
                                <div class="clicked_bar_containers row_content">
                                    <svg id="clicked_bar_recent_immigration" class="bars clicked_bars"></svg>
                                </div>
                                <div class="provter_values_containers row_content">
                                    <p class="provter_values" id="provter_value_recent_immigration"> 00.0% </p>
                                </div>
                                <div class="provter_bar_containers row_content">
                                    <svg id="provter_bar_recent_immigration" class="bars provter_bars"></svg>
                                </div>
                            </div>
                            <!------------------------------------------------------------------------>
                        </div>
                    </div>
                    <div id="methodology_link_container">
                        <a class="gen_links" id="methodology_link" target="_blank" href="about.html">About the Map</a>
                    </div>
                </div>
                <div id="map_container">
                    <div id="map_selections">
                        <select name="map_geo" id="map_geo" class="map_select" onchange="geo_change()">
                            <option value="auto" selected>Map Geography (auto)</option>
                            <option value="fed">Federal Electoral Districts</option>
                            <option value="ada">Aggregate Dissemination Areas</option>
                        </select>

                        <select name="map_data" id="map_data" class="map_select" onchange="data_change()">
                            <option value="population" selected>Indicators (Population)</option>
                            <option value="med_income">Median Household Income</option>
                            <option value="lim_at">LIM-AT</option>
                            <option value="child_poverty">Child poverty rate</option>
                            <option value="tenant30">Housing Affordability</option>
                            <option value="unemployment">Unmployment Rate</option>
                            <option value="aboriginal_identity">Indigenous Identity</option>
                            <option value="visible_minority">Visible Minority</option>
                            <option value="recent_immigration">Recent Immigration</option>
                        </select>

                        <select name="map_food" id="map_food" class="map_select" onchange="food_change()">
                            <option value="none" selected>Key Data Points</option>
                            <option value="food_basket">Nutritious Food Basket Costs</option>
                            <option value="food_bank">Food Bank Locations</option>
                        </select>
                    </div>
                    <div id='map'></div>
                </div>
            </div>
</body>

<!-- Connect to all scripts -->
<script src="scripts/mapbox_token.js"></script>
<script src="scripts/food_bank_points.js"></script>
<script src="scripts/provter.js"></script>
<script src="scripts/layers.js"></script>
<script src="scripts/tooltips.js"></script>
<script src="scripts/d3_bar_functions.js"></script>
<script src="scripts/change_events_data.js"></script>
<script src="scripts/change_events_food.js"></script>
<script src="scripts/change_events_geography.js"></script>
<script src="scripts/hover_click_events.js"></script>
<script src="scripts/initialization.js"></script>

</html>