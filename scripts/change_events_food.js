// listeners for drop down menues for user to select data
// changes visibility of appropriate map layers based on user selection

// select select element within html that holds the drop down menu for the map data and assign it to a variable
var map_food_select = document.getElementById("map_food");

var food_all_layers = ['food_basket', 'food_bank_cluster', 'food_bank_cluster_count', 'food_bank_unclustered_point'];

var food_basket_layers = ['food_basket'];

var food_bank_layers = ['food_bank_cluster', 'food_bank_cluster_count', 'food_bank_unclustered_point'];

// define funciton for what occurs when user selects new data to display
var food_change = function() {
    // selection from drop down menue
    var selection = map_food_select.value;

    if (selection == "food_basket") {
        // remove visibility of food bank layers
        for (var i = 0; i < food_bank_layers.length; i++) {
            hide_layer = food_bank_layers[i];
            map.setLayoutProperty(hide_layer, 'visibility', 'none');
        };

        // apply visibility to food basket layer
        for (var i = 0; i < food_basket_layers.length; i++) {
            show_layer = food_basket_layers[i];
            map.setLayoutProperty(show_layer, 'visibility', 'visible');
        };

        if (food_bank_popup != null) {
            // remove bank popups if open
            food_bank_popup.remove();
        };

    } else if (selection == "food_bank") {
        // remove visibility of food basket layers
        for (var i = 0; i < food_basket_layers.length; i++) {
            hide_layer = food_basket_layers[i];
            map.setLayoutProperty(hide_layer, 'visibility', 'none');
        };

        // apply visibility to food bank layer
        for (var i = 0; i < food_bank_layers.length; i++) {
            show_layer = food_bank_layers[i];
            map.setLayoutProperty(show_layer, 'visibility', 'visible');
        };

        if (food_basket_popup != null) {
            // remove basket popups if open
            food_basket_popup.remove();
        };

    } else {
        // remove visibility of all food layers
        for (var i = 0; i < food_all_layers.length; i++) {
            hide_layer = food_all_layers[i];
            map.setLayoutProperty(hide_layer, 'visibility', 'none');
        };

        // remove popups if open
        if (food_basket_popup != null) {
            // remove basket popups if open
            food_basket_popup.remove();
        };

        if (food_bank_popup != null) {
            // remove bank popups if open
            food_bank_popup.remove();
        };

    };
};