// define functions for updating layer opacities to call after re-defining variables
var update_opacity = function() {
    // update opacity of ada data layers
    for (var i = 0; i < layer_ids_ada_data.length; i++) {
        // variable to hold layer id from loop/array
        var layer = layer_ids_ada_data[i];
        map.setPaintProperty(layer, 'fill-opacity', {
            stops: [
                [opacity_1_stop_ada, opacity_1_value_ada],
                [opacity_2_stop_ada, opacity_2_value_ada],
                [opacity_3_stop_ada, opacity_3_value_ada],
                [opacity_4_stop_ada, opacity_4_value_ada]
            ]
        });
    };

    //update opacity of ada null layers
    for (var i = 0; i < layer_ids_ada_null.length; i++) {
        // variable to hold layer id from loop/array
        var layer = layer_ids_ada_null[i];
        map.setPaintProperty(layer, 'fill-opacity', {
            stops: [
                [opacity_1_stop_ada, opacity_1_value_ada],
                [opacity_2_stop_ada, opacity_2_value_ada],
                [opacity_3_stop_ada, opacity_3_value_ada],
                [opacity_4_stop_ada, opacity_4_value_ada]
            ]
        });
    };

    // fed data layers
    for (var i = 0; i < layer_ids_fed_data.length; i++) {
        // variable to hold layer id from loop/array
        var layer = layer_ids_fed_data[i];
        map.setPaintProperty(layer, 'fill-opacity', {
            stops: [
                [opacity_1_stop_fed, opacity_1_value_fed],
                [opacity_2_stop_fed, opacity_2_value_fed],
                [opacity_3_stop_fed, opacity_3_value_fed],
                [opacity_4_stop_fed, opacity_4_value_fed]
            ]
        });
    };

    // fed null layers
    for (var i = 0; i < layer_ids_fed_null.length; i++) {
        // variable to hold layer id from loop/array
        var layer = layer_ids_fed_null[i];
        map.setPaintProperty(layer, 'fill-opacity', {
            stops: [
                [opacity_1_stop_fed, opacity_1_value_fed],
                [opacity_2_stop_fed, opacity_2_value_fed],
                [opacity_3_stop_fed, opacity_3_value_fed],
                [opacity_4_stop_fed, opacity_4_value_fed]
            ]
        });
    };

    // for hover and click layers
    // fed hover layer
    map.setPaintProperty('fed_hover_border', 'line-opacity', {
        stops: [
            [opacity_1_stop_fed_hover, opacity_1_value_fed_hover],
            [opacity_2_stop_fed_hover, opacity_2_value_fed_hover],
            [opacity_3_stop_fed_hover, opacity_3_value_fed_hover]
        ]
    });

    map.setPaintProperty('fed_click_border', 'line-opacity', {
        stops: [
            [opacity_1_stop_fed_hover, opacity_1_value_fed_hover],
            [opacity_2_stop_fed_hover, opacity_2_value_fed_hover],
            [opacity_3_stop_fed_hover, opacity_3_value_fed_hover]
        ]
    });

    // ada hover layer
    map.setPaintProperty('ada_hover_border', 'line-opacity', {
        stops: [
            [opacity_1_stop_ada_hover, opacity_1_value_ada_hover],
            [opacity_2_stop_ada_hover, opacity_2_value_ada_hover],
            [opacity_3_stop_ada_hover, opacity_3_value_ada_hover]
        ]
    });

    map.setPaintProperty('ada_click_border', 'line-opacity', {
        stops: [
            [opacity_1_stop_ada_hover, opacity_1_value_ada_hover],
            [opacity_2_stop_ada_hover, opacity_2_value_ada_hover],
            [opacity_3_stop_ada_hover, opacity_3_value_ada_hover]
        ]
    });
};

// listeners for drop down menues for user to select geography
// changes zoom visibility of map layers based on user selection

var map_geo_select = document.getElementById("map_geo");
var geo_selection = "auto";
var geo_change = function() {
    geo_selection = map_geo_select.value;

    if (geo_selection == "auto") {
        // will transition on zoom between feds and adas
        // default zoom and opacity levels as defined in layers.js file
        opacity_1_stop_ada = 0;
        opacity_2_stop_ada = 7;
        opacity_3_stop_ada = 8;
        opacity_4_stop_ada = 10;

        opacity_1_value_ada = 0;
        opacity_2_value_ada = 0.5;
        opacity_3_value_ada = 0.7;
        opacity_4_value_ada = 0.8;

        opacity_1_stop_fed = 0;
        opacity_2_stop_fed = 7;
        opacity_3_stop_fed = 8;
        opacity_4_stop_fed = 10;

        opacity_1_value_fed = 0.9;
        opacity_2_value_fed = 0.75;
        opacity_3_value_fed = 0.5;
        opacity_4_value_fed = 0;

        // also for hover and click layers, default values
        // fed
        opacity_1_stop_fed_hover = 0;
        opacity_2_stop_fed_hover = 9;
        opacity_3_stop_fed_hover = 10;

        opacity_1_value_fed_hover = 0.9;
        opacity_2_value_fed_hover = 0.8;
        opacity_3_value_fed_hover = 0;

        // ada
        opacity_1_stop_ada_hover = 0;
        opacity_2_stop_ada_hover = 9.5;
        opacity_3_stop_ada_hover = 10;

        opacity_1_value_ada_hover = 0;
        opacity_2_value_ada_hover = 0;
        opacity_3_value_ada_hover = 0.9;

        update_opacity();

    } else if (geo_selection == "fed") {
        // make only fed polygons visible, regardless of zoom
        // adas will always be hidden by having 0 opacity

        opacity_1_stop_ada = 0;
        opacity_2_stop_ada = 7;
        opacity_3_stop_ada = 8;
        opacity_4_stop_ada = 10;

        opacity_1_value_ada = 0;
        opacity_2_value_ada = 0;
        opacity_3_value_ada = 0;
        opacity_4_value_ada = 0;

        // feds will always be visible regardless of zoom
        opacity_1_stop_fed = 0;
        opacity_2_stop_fed = 7;
        opacity_3_stop_fed = 8;
        opacity_4_stop_fed = 10;

        opacity_1_value_fed = 0.8;
        opacity_2_value_fed = 0.8;
        opacity_3_value_fed = 0.8;
        opacity_4_value_fed = 0.8;

        // also for hover and click layers, feds always visible
        opacity_1_stop_fed_hover = 0;
        opacity_2_stop_fed_hover = 9;
        opacity_3_stop_fed_hover = 10;

        opacity_1_value_fed_hover = 0.9;
        opacity_2_value_fed_hover = 0.9;
        opacity_3_value_fed_hover = 0.9;

        // ada
        opacity_1_stop_ada_hover = 0;
        opacity_2_stop_ada_hover = 9.5;
        opacity_3_stop_ada_hover = 10;

        opacity_1_value_ada_hover = 0;
        opacity_2_value_ada_hover = 0;
        opacity_3_value_ada_hover = 0;

        update_opacity();

    } else if (geo_selection == "ada") {
        // make only ada polygons visible, regardless of zoom
        // feds will always be hidden by having 0 opacity
        opacity_1_stop_ada = 0;
        opacity_2_stop_ada = 7;
        opacity_3_stop_ada = 8;
        opacity_4_stop_ada = 10;

        opacity_1_value_ada = 0.8;
        opacity_2_value_ada = 0.8;
        opacity_3_value_ada = 0.8;
        opacity_4_value_ada = 0.8;

        // feds will always be hidden regardless of zoom
        opacity_1_stop_fed = 0;
        opacity_2_stop_fed = 7;
        opacity_3_stop_fed = 8;
        opacity_4_stop_fed = 10;

        opacity_1_value_fed = 0;
        opacity_2_value_fed = 0;
        opacity_3_value_fed = 0;
        opacity_4_value_fed = 0;

        // also for hover and click layers, feds always hidden
        opacity_1_stop_fed_hover = 0;
        opacity_2_stop_fed_hover = 9;
        opacity_3_stop_fed_hover = 10;

        opacity_1_value_fed_hover = 0;
        opacity_2_value_fed_hover = 0;
        opacity_3_value_fed_hover = 0;

        // ada
        opacity_1_stop_ada_hover = 0;
        opacity_2_stop_ada_hover = 9.5;
        opacity_3_stop_ada_hover = 10;

        opacity_1_value_ada_hover = 0.9;
        opacity_2_value_ada_hover = 0.9;
        opacity_3_value_ada_hover = 0.9;

        update_opacity();
        
    }

};